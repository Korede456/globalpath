<!-- Modal Structure (View and Edit) -->
<div id="job-modal-{{ job.id }}" class="hidden fixed inset-0 bg-gray-500 bg-opacity-75 flex justify-center items-center z-20">
    <div class="bg-white rounded-lg w-1/2 p-6">
      <div class="flex justify-between items-center">
        <h2 class="text-xl font-bold">Job Details</h2>
        <button class="text-indigo-600 hover:text-indigo-800" id="edit-button-{{ job.id }}">
          Edit
        </button>
      </div>
  
      <!-- Form displaying job details in read-only mode initially -->
      <form id="job-form-{{ job.id }}" action="{% url 'employer:job_edit' job.id %}" method="POST">
        {% csrf_token %}
        <div class="mt-4">
          <label for="title" class="block text-sm font-medium text-gray-700">Title</label>
          <input id="title" name="title" type="text" class="block w-full px-3 py-2 border border-gray-300 rounded-md" value="{{ job.title }}" readonly>
  
          <label for="job_type" class="block mt-4 text-sm font-medium text-gray-700">Job Type</label>
          <input id="job_type" name="job_type" type="text" class="block w-full px-3 py-2 border border-gray-300 rounded-md" value="{{ job.get_job_type_display }}" readonly>
  
          <label for="schedule" class="block mt-4 text-sm font-medium text-gray-700">Schedule</label>
          <input id="schedule" name="schedule" type="text" class="block w-full px-3 py-2 border border-gray-300 rounded-md" value="{{ job.get_schedule_display }}" readonly>
  
          <label for="company" class="block mt-4 text-sm font-medium text-gray-700">Company</label>
          <input id="company" name="company" type="text" class="block w-full px-3 py-2 border border-gray-300 rounded-md" value="{{ job.company.company_name }}" readonly>
  
          <label for="description" class="block mt-4 text-sm font-medium text-gray-700">Description</label>
          <textarea id="description" name="description" rows="4" class="block w-full px-3 py-2 border border-gray-300 rounded-md" readonly>{{ job.description }}</textarea>
  
          <label for="time_posted" class="block mt-4 text-sm font-medium text-gray-700">Date Posted</label>
          <input id="time_posted" name="time_posted" type="text" class="block w-full px-3 py-2 border border-gray-300 rounded-md" value="{{ job.time_posted|date:'M d, Y' }}" readonly>
        </div>
  
        <div class="mt-6 text-right">
          <button type="button" class="px-4 py-2 bg-indigo-600 text-white rounded-md close-modal">Close</button>
          <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded-md hidden" id="save-button-{{ job.id }}">Save</button>
        </div>
      </form>
    </div>
  </div>
  document.querySelectorAll('.view-button').forEach(function(button) {
    button.addEventListener('click', function() {
      const jobId = button.getAttribute('data-job-id');
      const modal = document.getElementById('job-modal-' + jobId);
      modal.classList.remove('hidden');
    });
  });
  
  // Close the modal
  document.querySelectorAll('.close-modal').forEach(function(button) {
    button.addEventListener('click', function() {
      const modal = button.closest('.hidden') ? null : button.closest('.hidden');
      modal.classList.add('hidden');
    });
  });
  
  // Enable form editing and display the save button after confirmation
  document.querySelectorAll('[id^="edit-button-"]').forEach(function(button) {
    button.addEventListener('click', function() {
      const jobId = button.id.split('-')[2];
      const form = document.getElementById('job-form-' + jobId);
      const inputs = form.querySelectorAll('input, textarea');
      const saveButton = document.getElementById('save-button-' + jobId);
  
      if (confirm("Are you sure you want to edit this post?")) {
        // Enable form inputs
        inputs.forEach(function(input) {
          input.removeAttribute('readonly');
        });
  
        // Show the save button
        saveButton.classList.remove('hidden');
  
        // Disable edit button after confirmation
        button.disabled = true;
      }
    });
  });
  